(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"7Nkf":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return l}));var r=n("hosL"),i=n("Y3FI"),a=n("ddgq"),o=n("k8bO"),s=n("7YW4");class l extends r.Component{constructor(e){super(e),this.restart=()=>{this.controller.restart()},this.newgame=()=>{Object(i.b)("/")},this.boardClick=e=>{console.log("BoardClick",e,this.game),this.game.finished||this.game.nextPlayer===this.player&&(e.isEmpty||alert("This space is already taken"),this.controller.move(e.boardIndex))},this.state={connectedToPeer:!1,connectedToPlayer:!1,waiting:!1,error:!1,win:[],board:o.a.generateEmptyBoard()},"undefined"!=typeof window&&(this.controller=new s.a(o.a.X),this.controller.on("open",(()=>this.setState({connectedToPeer:!0}))),this.controller.on("connected",(()=>this.setState({connectedToPlayer:!0}))),this.controller.on("updatedGameState",(e=>{this.setState({waiting:this.game.nextPlayer!==this.player,win:e.winIndexes,board:e.board})})))}get player(){return this.controller&&this.controller.player}get game(){return this.controller&&this.controller.game}status(){return this.game&&this.game.finished?this.game.draw?"Tie":this.player===o.a.X&&this.game.xWin||this.player===o.a.O&&this.game.oWin?"You won":"You lost":this.state.waiting?"Waiting...":"Your turn..."}renderConnecting(){return Object(r.h)("main",null,Object(r.h)("p",null,"Connecting..."),this.renderButtons())}renderWaitingForPlayer(){const e=window.location.href.replace("/host",`/remote?${this.controller.peer.id}`),t=Object(r.h)("p",null,"Copy and paste this link to a friend: ",Object(r.h)("input",{type:"text",value:e,readonly:!0}));return Object(r.h)("main",null,Object(r.h)("p",null,"Waiting for another player..."),t,this.renderButtons())}renderBoard(){const e=this.state.connectedToPlayer?Object(r.h)(a.a,{win:this.state.win,board:this.state.board,click:this.boardClick}):Object(r.h)("div",null);return Object(r.h)("main",null,Object(r.h)("p",null,"You are playing as X."),Object(r.h)("div",{class:"board-wrapper"},e,Object(r.h)("span",{"aria-live":"polite","aria-atomic":"true",class:"status"},this.status())),this.renderButtons())}renderButtons(){const e=this.game&&this.game.finished?Object(r.h)("button",{onclick:this.restart},"Restart"):"";return Object(r.h)("p",null,e,Object(r.h)("button",{onclick:this.newgame},"New Game"))}render(e,t){return t.connectedToPeer?t.connectedToPlayer?this.renderBoard():this.renderWaitingForPlayer():this.renderConnecting()}}}}]);
//# sourceMappingURL=route-host_game.chunk.dda1e.esm.js.map