(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"k6+y":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return c}));var r=n("hosL"),a=n("Y3FI"),i=n("ddgq"),s=n("k8bO"),o=n("7YW4");class c extends r.Component{constructor(e){super(e),this.boardClick=e=>{console.log("BoardClick",e,this.game),this.game.finished||this.game.nextPlayer===this.player&&(e.isEmpty||alert("This space is already taken"),this.controller.move(e.boardIndex))},this.restart=()=>{this.controller.restart()},this.newgame=()=>{Object(a.b)("/")},this.state={connectedToPeer:!1,connectedToPlayer:!1,waiting:!0,error:!1,win:[],board:s.a.generateEmptyBoard()},"undefined"!=typeof window&&(this.hostId=window.location.search.replace("?",""),this.controller=new o.a(s.a.O),this.controller.on("open",()=>{this.setState({connectedToPeer:!0}),this.controller.connectToHost(this.hostId)}),this.controller.on("connected",()=>this.setState({connectedToPlayer:!0})),this.controller.on("updatedGameState",e=>{this.setState({waiting:this.game.nextPlayer!==this.player,win:e.winIndexes,board:e.board})}))}get player(){return this.controller.player}get game(){return this.controller.game}status(){return this.game&&this.game.finished?this.game.draw?"Tie":this.player===s.a.X&&this.game.xWin||this.player===s.a.O&&this.game.oWin?"You won":"You lost":this.state.waiting?"Waiting...":"Your turn..."}renderConnecting(){return Object(r.h)("main",null,Object(r.h)("p",null,"Connecting..."),this.renderButtons())}renderWaitingForPlayer(){return Object(r.h)("main",null,Object(r.h)("p",null,"Connecting to player..."),this.renderButtons())}renderBoard(){var e=this.state.connectedToPlayer?Object(r.h)(i.a,{win:this.state.win,board:this.state.board,click:this.boardClick}):Object(r.h)("div",null);return Object(r.h)("main",null,Object(r.h)("p",null,"You are playing as O."),Object(r.h)("div",{class:"board-wrapper"},e,Object(r.h)("span",{class:"status"},this.status())),this.renderButtons())}renderButtons(){var e=this.game.finished?Object(r.h)("button",{onclick:this.restart},"Restart"):"";return Object(r.h)("p",null,e,Object(r.h)("button",{onclick:this.newgame},"New Game"))}render(e,t){return t.connectedToPeer?t.connectedToPlayer?this.renderBoard():this.renderWaitingForPlayer():this.renderConnecting()}}}}]);
//# sourceMappingURL=route-remote_game.chunk.b9455.esm.js.map